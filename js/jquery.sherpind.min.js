/*
 * sherpiND
 *
 * Copyright (c) 2011 University of Notre Dame
 * Licensed under the MIT License
 * http://nd.edu/copyright/
 *
 * Date: 2011-04-05
 * Version: 1.0
 */

(function(a){a.fn.sherpiND=function(d){var d=a.extend({},a.fn.sherpiND.defaults,d),g=a(document).height(),h=a(window).height(),d='<ol id="sherpind" class="'+d.color+'"></ol>';a(document.body).append(d);var f=a("#sherpind");f.find("li").live("click",function(){a(this);var b=this.getAttribute("data-target"),b=parseInt(a("#"+b).offset().top,10);a("html,body").animate({scrollTop:b})}).live("mouseenter",function(){var b=a(this),c=b.offset().top,e=a(window).scrollTop();b.addClass("hover");c+b.height()>
h+e&&(b.addClass("pinup"),c="-"+b.height()+"px",b.find(".content").css({"margin-top":c}))}).live("mouseleave",function(){a(this).removeClass("hover").removeClass("pinup");a(this).find(".content").css({"margin-top":"-19px"})});a(window).resize(function(){var b=window.innerHeight;f.find("li").each(function(){var c=this.getAttribute("data-target"),c=a("#"+c).offset().top/g,c=parseInt(c*b,10);a(this).css({top:c})})});return this.each(function(){var b=a(this),c=this.getAttribute("id"),e=a("#"+c),d=b.offset().top/
g,d=parseInt(d*h,10),j=this.getAttribute("class"),b=b.text(),i="",e=this.getAttribute("data-pin-img")?this.getAttribute("data-pin-img"):e.next("img").first().attr("src"),c=a("#"+c+" ~ p").first(),c=this.getAttribute("data-pin-snippet")?this.getAttribute("data-pin-snippet")+"&hellip;":c.text().substr(0,30)+"&hellip;";e&&e.length&&(i='<div class="tease"><img src="'+e+'" alt="Preview Image"></div>');f.append('<li data-target="'+this.getAttribute("id")+'" style="top:'+d+'px;" class="'+j+'"><div class="marker"></div><div class="content">'+
i+'<span class="title">'+b+'</span><p class="snippet">'+c+"</p></div></li>")})};a.fn.sherpiND.defaults={color:"light-gray"}})(jQuery);
